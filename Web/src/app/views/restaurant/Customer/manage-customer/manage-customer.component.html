<div class="container-fluid page">
  <div class="d-flex page_box p-3 mt-2  header-sticky" position="sticky">
    <div *ngIf="Add">Manage Customer
    </div>
    <div *ngIf="Edit">Edit Customer
    </div>
  </div>
  <div class="page_content shadow p-3 position-relative">
    <mat-card style="padding: 10px;">
      <form name="eventForm" #userForm="ngForm">
        <div fxLayout="row" fxLayoutAlign="space-between">
          <mat-form-field fxFlex="48%" appearance="outline" class="form-group">
            <mat-label>Enter Name</mat-label>
            <input matInput #name="ngModel" maxlength="100" name="Name" type="text" [(ngModel)]="selectedCustomer.name"
              placeholder="Customer Name" required>
          </mat-form-field>
          <mat-form-field fxFlex="48%" appearance="outline" class="form-group">
            <mat-label>Enter Email</mat-label>
            <input matInput #email="ngModel" maxlength="100" name="email" email type="text"
              [(ngModel)]="selectedCustomer.email" placeholder="Customer Email" required>
            <mat-error *ngIf="userForm.controls['email']?.errors?.['email']">
              Email is not valid.
            </mat-error>
          </mat-form-field>
        </div>
        <div fxLayout="row" fxLayoutAlign="space-between">
          <mat-form-field fxFlex="48%" appearance="outline" appearance="outline">
            <mat-label>Enter Phone No</mat-label>
            <input type="tel" #Phone="ngModel" maxlength="100" matInput placeholder="Phone No" required name="phone"
              [(ngModel)]="selectedCustomer.phone">
          </mat-form-field>
          <mat-form-field fxFlex="48%" appearance="outline" class="form-group">
            <mat-label>Enter Adrress</mat-label>
            <input matInput #address="ngModel" maxlength="300" name="Address" type="text"
              [(ngModel)]="selectedCustomer.address" placeholder="Address">
          </mat-form-field>
        </div>
        <div fxLayout="row" fxLayoutAlign="space-between">
          <mat-form-field fxFlex="48%" appearance="outline" appearance="outline">
            <mat-label>Enter CNIC</mat-label>
            <input type="text" #CNIC="ngModel" maxlength="20" matInput placeholder="CNIC" name="CNIC"
              [(ngModel)]="selectedCustomer.cnic">
          </mat-form-field>
          <mat-form-field fxFlex="48%" appearance="outline" class="form-group">
            <mat-label>Enter City</mat-label>
            <input matInput #city="ngModel" maxlength="200" name="City" type="text" [(ngModel)]="selectedCustomer.city"
              placeholder="City">
          </mat-form-field>
        </div>
        <div fxLayout="row" fxLayoutAlign="space-between">
          <mat-form-field fxFlex="48%" appearance="outline">
            <mat-label> Select Branch</mat-label>
            <mat-select name="branchId" [(ngModel)]="selectedCustomer.branchId">
              <mat-option *ngFor="let pt of branch" [value]=" pt.id">
                {{ pt.name}}
              </mat-option>
            </mat-select>
          </mat-form-field>
          <mat-form-field fxFlex="48%" appearance="outline">
            <mat-label> Select Account</mat-label>
            <mat-select name="accId" [(ngModel)]="selectedCustomer.accId" required>
              <mat-option *ngFor="let pt of accounts" [value]=" pt.id">
                {{ pt.name}}
              </mat-option>
            </mat-select>
          </mat-form-field>
        </div>
        <mat-checkbox #isActive="ngModel" name="isActive" [(ngModel)]="selectedCustomer.isActive">
          IsActive
        </mat-checkbox>
        <div fxLayoutAlign="end end">
          <c-spinner *ngIf="proccessing" style="height: 50px;width: 50px;color: rgb(3, 71, 102);"></c-spinner>
        </div>
        <div style="margin-top: 10px;" *ngIf="!proccessing" fxLayoutAlign="end end">
          <button [ngClass]="{disabledBtn:isReadOnly}" class="bttn"  *ngIf=" !Edit" [disabled]="userForm.invalid"
            style=" margin-top: 20px;" type="submit"
            (click)="SaveCustomer()">Submit
          </button>
          <button  type="submit" *ngIf="!Add" [disabled]="userForm.invalid"
          [ngClass]="{disabledBtn:isReadOnly}" class="bttn" 
            style=" margin-top: 20px;" (click)="SaveCustomer()">Update
          </button>
          <button [ngClass]="{disabledBtn:isReadOnly}" class="darkBttn"  (click)="Back()"
            style="margin-left: 5px; margin-top: 20x;">Back
          </button>
        </div>
      </form>
    </mat-card>
  </div>
</div>
